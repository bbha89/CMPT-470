<!DOCTYPE html>
<html>
  <head>
    <title>Edit Listing</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/nav.css"/>
    <link rel="stylesheet" href="/stylesheets/new-listing-style.css">
  </head>
  <body>
    <%- include('partials/nav.ejs') %>
    <form action="/listing/update-listing" method="post" class = "container">
      <div class = "login-form">
        <h1>Edit Listing Information</h1>
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">

        <input type="hidden" name="listingid" value="<%=data.listingid%>" readonly>
        <input type="hidden" name="buildingid" value="<%=data.buildingid%>" readonly>
        <input type="hidden" name="propertyid" value="<%=data.propertyid%>" readonly>
        <input type="hidden" name="locationid" value="<%=data.locationid%>" readonly>

        <div class ="flex-input">
          <label for="">Title:</label>
          <input type="text" name="title" value="<%=data.title%>" required>
        </div>

        <div class ="flex-input">
          <label for="">Price:</label>
          <input type="number" name="price" value="<%=data.price%>" required><br><br>
        </div>

        <div class ="flex-input">
          <label for="type">Listing Type</label>
          <select id="listing_type" name="listing_type">
            <option value="rental">Rental</option>
            <option value="sale">Sale</option>
          </select>  
        </div>

        <div class ="flex-input">
          <label for="">Description:</label>
          <input type="text" name="description" value="<%=data.description%>">
        </div>

        <h2>Building</h2>

        <div class ="flex-input">
          <label for="">Bathrooms:</label>
          <input type="number" name="bathrooms" value="<%=data.bathrooms%>" required>
        </div>

        <div class ="flex-input">
          <label for="">Bedrooms:</label>
          <input type="number" name="bedrooms" value="<%=data.bedrooms%>" required>
        </div>

        <div class ="flex-input">
          <label for="">Floor Space (Sqft):</label>
          <input type="number" name="floor_space" value="<%=data.floor_space%>">
        </div>
        
        <div class ="flex-input">
          <label for="">Building Type:</label>
          <input type="text" name="building_type" value="<%=data.building_type%>">
        </div>
        
        <div class ="flex-input">
          <label for="">Storeys:</label>
          <input type="number" name="storeys" value="<%=data.storeys%>">
        </div>

        <div class ="flex-input">
          <label for="">Appliances:</label>
          <input type="text" name="appliances" value="<%=data.appliances%>"> 
        </div>

        <h2>Property</h2>

        <div class ="flex-input">
          <label for="">Property Age (Years):</label>
          <input type="number" name="property_age" value="<%=data.property_age%>">
        </div>

        <div class ="flex-input">
          <label for="">Annual Property Tax:</label>
          <input type="number" name="annual_property_tax" value="<%=data.annual_property_tax%>">
        </div>

        <div class ="flex-input">
          <label for="">Parking Type:</label>
          <input type="text" name="parking_type" value="<%=data.parking_type%>">
        </div>
        
        <div class ="flex-input">
          <label for="">Amenities:</label>
          <input type="text" name="amenities" value="<%=data.amenities%>">
        </div>

        <h2>Location</h2>

        <div class ="flex-input">
          <label for="">Country:</label>
          <input type="text" name="country" value="<%=data.country%>" required>
        </div>
        
        <div class ="flex-input">
          <label for="">Province/State:</label>
          <input type="text" name="province_state" value="<%=data.province_state%>" required>
        </div>
        
        <div class ="flex-input">
          <label for="">City:</label>
          <input type="text" name="city" value="<%=data.city%>" required>
        </div>
        
        <div class ="flex-input">
          <label for="">Address:</label>
          <input type="text" name="address" value="<%=data.address%>" required>
        </div>
        
        <div class ="flex-input">
          <label for="">Postal Code:</label>
          <input type="text" name="postal_code" value="<%=data.postal_code%>" required>
        </div>
        
        <div>
          <button type="submit">Update Listing</button>
        </div>

      </div>
    </form>
    <form action="/listing/delete-listing" method="post" class = "container">
      <div class = "login-form">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
        <input type="hidden" name="listingid" value="<%=data.listingid%>" readonly>
        <input type="hidden" name="buildingid" value="<%=data.buildingid%>" readonly>
        <input type="hidden" name="propertyid" value="<%=data.propertyid%>" readonly>
        <input type="hidden" name="locationid" value="<%=data.locationid%>" readonly>

        <div>
          <button type="submit">Click to delete</button>
        </div>

      </div>
    </form>
  </body>
  <script>
      $('#listing_type').val("<%=data.listing_type%>")
  </script>
</html>